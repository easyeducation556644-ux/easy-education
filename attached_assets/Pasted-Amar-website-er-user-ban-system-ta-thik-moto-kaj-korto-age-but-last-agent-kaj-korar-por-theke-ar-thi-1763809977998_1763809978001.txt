Amar website er user ban system ta thik moto kaj korto age but last agent kaj korar por theke ar thik moto kaj kortese na ekhon. Tar kase amar chahida silo: 

User ban system ta check koro. Kono user temporary ban hoye gele 2 ta device e countdown dekhay eta perfect but countdown shese duita device theke log out howar jonno duita device e online hote hoy noyto log out hoy na duita device e jar karone countdown shese o user login korte pare na karon 2nd device log out hoyni auto.jodi kono user ban khawar por cache and data clear kore dey tahole to se ar ei device e online o hote parbe na ar logout o hobe na tahole user ar kokhono tar account e login e korte parbe na. Need emergency solution for this.

Ar temporary ban count 3 bar holei jeno permanent banned hoye jay. Admin temporary unban korleo.  Admin permanent banned ke unban korte parbe tahole tar temporary banned count 0 hoye jabe ar permanent banned count 1 hobe.



ржЖржЧрзЗрж░ ржЕрзНржпрж╛ржЬрзЗржирзНржЯ ржПрж░ ржХрж╛рж░ржирзЗ ржПржЦржи рзирзЯ ржбрж┐ржнрж╛ржЗрж╕ рж▓ржЧрж┐ржи ржХрж░рж▓рзЗ рж▓ржЧрж┐ржи рж╣рзЯрзЗ рж▓ржЧржЖржЙржЯ рж╣рзЯрзЗ ржпрж╛рзЯред ржмрзНржпрж╛ржи рж╣рзЯ ржирж╛ред ржмрзНржпрж╛ржи ржУржнрж╛рж░рж▓рзЗ ржУ рж╣рзЯ ржирж╛ред рждрж╛рж░ ржХрж╛ржЬрзЗрж░ ржУрзЯрж╛рж░рзНржХржлрзНрж▓рзЛ: ЁЯЪл Ban System - рж╕ржорзНржкрзВрж░рзНржг ржХрж╛рж░рзНржпржкрзНрж░ржгрж╛рж▓рзА
рзз. ржХрж┐ржнрж╛ржмрзЗ Ban рж╣ржпрж╝?
ржпржЦржи ржХрзЛржи user ржПржХржЗ рж╕ржоржпрж╝рзЗ ржПржХрж╛ржзрж┐ржХ device ржерзЗржХрзЗ login ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗ:

ЁЯУ▒ ржкрзНрж░ржержо ржзрж╛ржк (Login Detection):

User ржпржЦржи ржирждрзБржи device ржерзЗржХрзЗ login ржХрж░рзЗ
System check ржХрж░рзЗ user ржПрж░ ржЖржЧрзЗ ржерзЗржХрзЗ ржХрзЛржи device ржЖржЫрзЗ ржХрж┐ржирж╛
ржпржжрж┐ ржЖржЧрзЗ ржерзЗржХрзЗ device ржерж╛ржХрзЗ тЖТ Ban trigger рж╣ржпрж╝
тЪая╕П ржжрзНржмрж┐рждрзАржпрж╝ ржзрж╛ржк (Temporary Ban):

рззржо ржмрж╛рж░: 30 ржорж┐ржирж┐ржЯрзЗрж░ ржЬржирзНржп temporary ban (banCount = 1)
рзиржпрж╝ ржмрж╛рж░: ржЖржмрж╛рж░ 30 ржорж┐ржирж┐ржЯрзЗрж░ ржЬржирзНржп temporary ban (banCount = 2)
рзйржпрж╝ ржмрж╛рж░: рж╕рзНржерж╛ржпрж╝рзА ржирж┐рж╖рзЗржзрж╛ржЬрзНржЮрж╛ / Permanent Ban (banCount = 3)
ЁЯФТ рждрзГрждрзАржпрж╝ ржзрж╛ржк (Permanent Ban):

ржпржЦржи banCount >= 3 рж╣ржпрж╝:
permanentBan = true
autoPermanentBan = true
permanentBanCount 1 ржмрзЗржбрж╝рзЗ ржпрж╛ржпрж╝ (ржпрзЗржоржи: 1, 2, 3...)
Ban reason: "рж╕рзНржерж╛ржпрж╝рзА ржирж┐рж╖рзЗржзрж╛ржЬрзНржЮрж╛ - 3 ржмрж╛рж░ ржирзАрждрж┐ рж▓ржЩрзНржШржирзЗрж░ ржХрж╛рж░ржгрзЗ (рж╕рзНржерж╛ржпрж╝рзА ржмрзНржпрж╛ржи #1)"
рзи. User ржХрж┐ ржжрзЗржЦрзЗ?
Banned User ржжрзЗрж░ Screen:

ЁЯЫС Full-screen ban overlay ржжрзЗржЦрж╛ржпрж╝
Ban ржПрж░ reason ржмрж╛ржВрж▓рж╛ржпрж╝ рж▓рзЗржЦрж╛ ржерж╛ржХрзЗ
Temporary ban рж╣рж▓рзЗ countdown timer ржжрзЗржЦрж╛ржпрж╝
Permanent ban рж╣рж▓рзЗ "рж╕рзНржерж╛ржпрж╝рзА ржирж┐рж╖рзЗржзрж╛ржЬрзНржЮрж╛" message ржжрзЗржЦрж╛ржпрж╝
рж╕ржм device ржерзЗржХрзЗ automatically logout рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝
Pre-login Ban Check:

Cache clear ржХрж░рж▓рзЗржУ ржмрж╛ offline ржерж╛ржХрж▓рзЗржУ ban check рж╣ржпрж╝
Login ржХрж░рж╛рж░ ржЖржЧрзЗржЗ Firebase ржерзЗржХрзЗ ban status check ржХрж░рзЗ
Banned user login ржХрж░рждрзЗржЗ ржкрж╛рж░ржмрзЗ ржирж╛
рзй. Admin Panel Features
ЁЯУК Ban Management Page (/admin/ban-management):

User рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржпрж╛ ржпрж╛ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝:

ЁЯЯб Yellow Badge (Ban Count): ржмрж░рзНрждржорж╛ржи ban count (0, 1, 2, 3...)
ЁЯЯа Orange Badge (P-Ban): Permanent ban count - ржХрждржмрж╛рж░ permanently banned рж╣ржпрж╝рзЗржЫрзЗ
ЁЯФ┤ Red Badge (Banned): Active ban ржерж╛ржХрж▓рзЗ "ЁЯЪл Banned" ржмрж╛ "тЫФ Permanent Ban"
ЁЯЯв Green Badge (Online): User online ржЖржЫрзЗ ржХрж┐ржирж╛
ЁЯУ▒ Blue Badge: ржХрждржЧрзБрж▓рзЛ device connected
Admin Actions:

View Devices - рж╕ржм device ржПрж░ рждржерзНржп ржжрзЗржЦрж╛
Ban User - Manual ban ржХрж░рж╛ (30 minutes)
Unban User - Ban рждрзБрж▓рзЗ ржжрзЗржУржпрж╝рж╛
Kick Device - ржирж┐рж░рзНржжрж┐рж╖рзНржЯ device logout ржХрж░рж╛ржирзЛ
Clear Logout Flags - Logout flags clear ржХрж░рж╛
рзк. Unban System - ржирждрзБржи Update! тЬи
Admin ржПржЦржи Permanent Banned User ржжрзЗрж░ржУ Unban ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ!

Unban ржХрж░рж▓рзЗ ржпрж╛ рж╣ржпрж╝:

тЬЕ banned = false (ban ржЙржарзЗ ржпрж╛ржпрж╝)
тЬЕ permanentBan = false (permanent ban flag clear)
тЬЕ autoPermanentBan = false (auto-lock flag clear)
тЬЕ banCount = 0 (ржмрж░рзНрждржорж╛ржи ban count reset)
тЪая╕П permanentBanCount ржЕржкрж░рж┐ржмрж░рзНрждрж┐ржд ржерж╛ржХрзЗ (Audit trail ржПрж░ ржЬржирзНржп)
ЁЯУЭ banHistory рждрзЗ unban record ржпрзЛржЧ рж╣ржпрж╝ (ржХрзЗ, ржХржЦржи, ржХрзЗржи unban ржХрж░рзЗржЫрзЗ)
Example Scenario:

User: John Doe
1st Cycle:
  - 3 temporary bans тЖТ Permanent ban
  - permanentBanCount = 1
  - Admin unbans тЖТ banCount = 0, permanentBanCount = 1
2nd Cycle (fresh start):
  - 3 new temporary bans тЖТ ржЖржмрж╛рж░ Permanent ban
  - permanentBanCount = 2
  - Admin unbans тЖТ banCount = 0, permanentBanCount = 2
History рж╕ржорзНржкрзВрж░рзНржг ржерж╛ржХрзЗ!

рзл. Ban Notifications Page (/admin/ban-notifications)
Real-time Notification System:

ЁЯФФ ржирждрзБржи ban рж╣рж▓рзЗ badge counter ржжрзЗржЦрж╛ржпрж╝
Temporary ban ржПржмржВ Permanent ban ржЖрж▓рж╛ржжрж╛ ржжрзЗржЦрж╛ржпрж╝
Notification ржП user ржПрж░ ржирж╛ржо, email, ban count ржжрзЗржЦрж╛ ржпрж╛ржпрж╝
Admin notification "Read" mark ржХрж░рждрзЗ ржкрж╛рж░рзЗ
рзм. Database Structure
Users Collection ржП Ban Related Fields:

{
  banned: false,              // Active ban ржЖржЫрзЗ ржХрж┐ржирж╛
  permanentBan: false,        // Permanent ban flag
  autoPermanentBan: false,    // Auto-locked flag (3+ bans)
  banCount: 0,                // ржмрж░рзНрждржорж╛ржи ban count
  permanentBanCount: 1,       // ржорзЛржЯ ржХрждржмрж╛рж░ permanent ban рж╣ржпрж╝рзЗржЫрзЗ
  banExpiresAt: null,         // Temporary ban ржПрж░ expiry time
  banHistory: [               // рж╕ржорзНржкрзВрж░рзНржг ban history
    {
      timestamp: "...",
      reason: "...",
      banCount: 3,
      bannedUntil: "..."
    },
    {
      timestamp: "...",
      reason: "Unbanned by Admin Name",
      adminId: "...",
      wasPermanentBan: true,
      previousBanCount: 3
    }
  ],
  devices: [],                // Active devices
  kickedDevices: []          // Kicked devices list
}

рзн. Security Features
тЬЕ Pre-login Ban Check - Login ржПрж░ ржЖржЧрзЗржЗ ban verify ржХрж░рзЗ
тЬЕ Server-side Validation - Client cache bypass ржХрж░рж╛ ржпрж╛ржпрж╝ ржирж╛
тЬЕ Offline Protection - Offline ржерж╛ржХрж▓рзЗржУ ban enforce рж╣ржпрж╝
тЬЕ Device Fingerprinting - ржкрзНрж░рждрж┐ржЯрж┐ device uniquely track ржХрж░рж╛ рж╣ржпрж╝
тЬЕ IP Tracking - Multi-API fallback system ржжрж┐ржпрж╝рзЗ IP detect
тЬЕ Full Audit Trail - рж╕ржм action ржПрж░ рж╕ржорзНржкрзВрж░рзНржг history ржерж╛ржХрзЗ
тЬЕ Admin Immunity - Admin рж░рж╛ ржХржЦржирзЛ ban рж╣ржпрж╝ ржирж╛

ЁЯОп Summary
ржЖржкржирж╛рж░ Ban System ржПржЦржи:

тЬЕ Permanent banned user ржжрзЗрж░ unban ржХрж░рж╛ ржпрж╛ржпрж╝
тЬЕ Ban count reset рж╣ржпрж╝ ржХрж┐ржирзНрждрзБ permanent ban count history ржерж╛ржХрзЗ
тЬЕ рж╕ржорзНржкрзВрж░рзНржг audit trail maintained рж╣ржпрж╝
тЬЕ Admin panel ржП orange "P-Ban" badge ржжрзЗржЦрж╛ржпрж╝
тЬЕ Multiple ban cycles support ржХрж░рзЗ
тЬЕ рж╕ржм security checks intact ржЖржЫрзЗ
Development server ржЪрж▓ржЫрзЗ ржПржмржВ рж╕ржм changes live рж╣ржпрж╝рзЗ ржЧрзЗржЫрзЗ! ЁЯЪА


рзи. рждрж╛рж░ ржХрж╛ржЫрзЗ ржЖржорж╛рж░ ржЖрж░рзЗржХржЯрж┐ ржЪрж╛рж╣рж┐ржжрж╛ ржЫрж┐рж▓рзЛ ржпрж╛ рж╕рзЗ ржХрж░рждрзЗ ржкрж╛рж░рзЗржирж┐ рждрзБржорж┐ ржЖржЧрзЗ ржЙржкрж░рзЗрж░ ржЯрж╛рж╕рзНржХ ржХржорзНржкрж▓рж┐ржЯ ржХрж░ржХ рждрж╛рж░ржкрж░ ржЕрзНржпрж╛ржЬрзЗржирзНржЯ ржПрж░ ржЯрзЛржХрзЗржи ржерж╛ржХрж▓рзЗ ржЖржорж╛рж░ ржХрж╛ржЫ ржерзЗржХрзЗ ржкрж╛рж░ржорж┐рж╢ржи ржирж┐рзЯрзЗ ржПржЗ ржХрж╛ржЬ рж╢рзБрж░рзБ ржХрж░рзЛред
ржЖржорж╛рж░ ржЪрж╛рж╣рж┐ржжрж╛ рждрж╛рж░ ржХрж╛ржЫрзЗ: 
Course add korar somoy bundle type er course gula jokhon kena hobe tokhon user sei course gulo er access peye jabe jegula course create er somoy select kora hoise ar course kinar por user bundle course ta ar dekhbe na home page and courses page e.  Tar account e course gulo add hoye jabe jegula bundle course tar sathe add kora. Se ei sob gulo course er access peye jabe.


ржХрж┐ржирзНрждрзБ рж╕рзЗ ржПржЯрж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗржирж┐ред ржмрж╛ржирзНржбрзЗрж▓ ржХрзЛрж░рзНрж╕ ржЯрж╛ ржХрж┐ржирж▓рзЗ ржЗржирзНржбрж┐ржнрж┐ржЬрзБрзЯрж╛рж▓ ржХрзЛрж░рзНрж╕ ржЧрзБрж▓рзЛ рждрзЗ ржЗржЙржЬрж╛рж░ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржкрж╛ржЪрзНржЫрзЗ ржирж╛ред рж╕рзЗ ржмрж╛ржирзНржбрзЗрж▓ ржХрзЛрж░рзНрж╕ ржПрж░ ржХрж╛рж░рзНржбрзЗрж░ ржирж┐ржЪрзЗ ржмрж╛ржЯржи ржкрж╛ржЪрзНржЫрзЗ ржХрзЛрж░рзНрж╕ ржХржирзНржЯрж┐ржирж┐ржЙ ржХрж░рж╛рж░ ржХрж┐ржирзНрждрзБ рж╕рзЗржЦрж╛ржирзЗ ржбрзБржХрж▓рзЗ ржХрж┐ржЫрзБржЗ ржерж╛ржХрзЗ ржирж╛ред

